<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.min.js"></script>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="/static/js/daumAddressScript.js"></script>
</head>
<body>
<ul>
    <li><a href="empMyPage">내정보 보기</a></li>
    <li><a href="employeeUpdate">내정보 수정</a></li>
    <li><a href="employeePwModify">비밀번호 변경</a></li>
    <li><a href="/">HOME</a></li>
</ul>

직원 정보 수정 페이지<br/>

<form action="employeeUpdate" method="post" th:object="${employeeCommand}">
<input type="hidden" name="empPwCon" value="111111111111">

    직원번호 : <input type="text" name="empNum"  id="empNum" readonly='readonly'  th:value="${employeeCommand.empNum}"/><br />
              <span style="color:red">자동 부여</span><br/>
    직원아이디 : <input type="text" name="empId" id="empId" th:value="${employeeCommand.empId}"/><br/>
                <span style="color:red" th:if="${#fields.hasErrors('empId')}" th:errors="*{empId}"></span><br/>
    직원비밀번호: <input type="password" name="empPw" id="empPw"><br/>
    <span style="color:red" th:if="${#fields.hasErrors('empPw')}" th:errors="*{empPw}"></span><br/>

    직원이름 : <input type="text" name="empName" th:value="${employeeCommand.empName}"/>
    <span style="color:red" th:if="${#fields.hasErrors('empName')}" th:errors="*{empName}"></span><br/>


    직원주소 : <input type="text" name="empAddr" id="sample4_roadAddress" th:value="${employeeCommand.empAddr}">
    <button type="button" onclick="execDaumPostcode()">주소검색</button><br />

    직원상세주소 : <input type="text" name="empAddrDetail" th:value="${employeeCommand.empAddrDetail}"/><br/>

    우편번호 : <input type="text" name="empPost" id="sample4_postcode" th:value="${employeeCommand.empPost}" />
    <span style="color:red" th:if="${#fields.hasErrors('empPost')}" th:errors="*{empPost}"></span><br/>


    연락처 : <input type="text" name="empPhone" th:value="${employeeCommand.empPhone}"/>
    <span style="color:red" th:if="${#fields.hasErrors('empPhone')}" th:errors="*{empPhone}"></span><br/>


    이메일: <input type="email" name="empEmail" id="empEmail" th:value="${employeeCommand.empEmail}"/>
    <span style="color:red" th:if="${#fields.hasErrors('empEmail')}" th:errors="*{empEmail}"></span><br/>
    <span id='emailCheck'></span><br/>

    주민번호 :<input type="text" name="empSsn" th:value="${employeeCommand.empSsn}" />
    <span style="color:red" th:if="${#fields.hasErrors('empSsn')}" th:errors="*{empSsn}"></span><br />

    입사일 : <input type="date" name="empRegiDate" th:value="${#dates.format(employeeCommand.empRegiDate, 'yyyy-MM-dd')}"/><br/>

    <input type="submit" value="수정"/><br/>

</form>

<script type="text/javascript">
    $(function(){
        $("#frm").submit(function(){
            if($("#emailCheck").text()=="" || $("emailCheck").text() == "사용중인 이메일입니다."){
                alert("이메일 중복확인을 해주세요.");
                return false;
            }
        });

            $("#memberEmail").on("change keyup", function(){
            $.ajax({
                type:'post',
                url:"/checkRest/userEmailCheck",
                data:{"userEmail":$("#memberEmail").val()},
                dataType:'text',
                success: function(result){

                    $("#emailCheck").text(result);
                    if(result.trim() == "사용가능한 이메일입니다."){
                        $("#emailCheck").css("color","blue");
                    }else{
                        $("#emailCheck").css("color","red");
                    }
                },
                error:function(){
                }
            });
        });
    });
    });

</script>
</body>
</html>