<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.companion.mapper.EmployeeMapper">
    <sql id="employeeBaseColumns">
        EMP_NUM, EMP_ID, EMP_PW, EMP_NAME, EMP_ADDR, EMP_ADDR_detail, EMP_POST,
        emp_enter_date, EMP_PHONE, EMP_EMAIL, EMP_ssn
    </sql>
    <select id="autoNum" resultType="string">
        select concat('emp' , coalesce(max(substr(emp_num,4)::Integer),100000) + 1)
        from employees
        <!-- 회원번호 가져오기에서 .mem대신 emp로 대체 -->
    </select>
    <insert id="employeeInsert" parameterType="com.example.companion.domain.EmployeeDTO">
        insert into employees( <include refid="employeeBaseColumns"></include>)
        values( #{empNum}, #{empPw}, #{empName}, #{empAddr}
        ,#{empAddrDetail}, #{empPost},
        ,now(), #{empPhone}, #{empEmail}, #{empSsn}
        )
    </insert>
</mapper>